<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Хакинтош на PC</title>

		<!--[ Meta ]-->
			<!--[ Meta Global ]-->
	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="robots" content="index, follow" />

	<meta name="author" content="Александра Травкина">
	<meta name="generator" content="Jekyll v3.8.5" />

	<!--[ Meta Twitter ]-->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="Fixel">
	<meta name="twitter:creator" content="@sasha_travkina">
	<meta name="twitter:title" content="Хакинтош на PC &middot; Fixel">
	<meta name="twitter:description" content="Расставшись со своим тормозящим MacBook Air в пользу домашнего компьютера, я столкнулась с вопросом о том, какой операционной системой пользоваться вместо удобной и ставшей уже привычной OS X. Windows 10, пожалуй, подходит только для игр, а linux не слишком дружелюбна...">
	<meta name="twitter:image" content="">

	<!--[ Meta Og ]-->
	<meta property="og:title" content="Хакинтош на PC &middot; Fixel" />
	<meta property="og:site_name" content="Fixel">	
	<meta property="og:url" content="https://sashatravkina.github.io/blog/blog/hackintosh-na-pc/">
	<meta property="og:description" content="Расставшись со своим тормозящим MacBook Air в пользу домашнего компьютера, я столкнулась с вопросом о том, какой операционной системой пользоваться вместо удобной и ставшей уже привычной OS X. Windows 10, пожалуй, подходит только для игр, а linux не слишком дружелюбна..."/>
	<meta property="og:image" content="" />
	<meta property="og:image:height" content="360">
	<meta property="og:image:width" content="640">
	<meta property="og:type" content="article">
	<meta property="og:locale" content="ru">

	<!--[ Favicons ]-->
	<link rel="icon" type="image/png" sizes="32x32" href="https://sashatravkina.github.io/blog/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://sashatravkina.github.io/blog/favicon-16x16.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://sashatravkina.github.io/blog/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://sashatravkina.github.io/blog/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://sashatravkina.github.io/blog/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://sashatravkina.github.io/blog/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://sashatravkina.github.io/blog/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://sashatravkina.github.io/blog/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://sashatravkina.github.io/blog/apple-touch-icon-180x180.png">
	<link rel="manifest" href="https://sashatravkina.github.io/blog/manifest.json">
	<link rel="mask-icon" href="https://sashatravkina.github.io/blog/favicon.svg">

	<!--[ Control ]-->
	<meta name="yandex-verification" content="f96ef0e811161c03" />
	<meta name="google-site-verification" content="Jsg0E4pNBManXIvFa392tyJVX2TK-cLaDt2zBf4xvm0" />

	<!--[ Feed ]-->
	<link rel="canonical" href="https://sashatravkina.github.io/blog/blog/hackintosh-na-pc/">
	<link rel="alternate" type="application/rss+xml" title="Fixel" href="https://sashatravkina.github.io/blog/feed.xml" />
		
		<!--[ CSS ]-->
		<link rel="stylesheet" type="text/css" href="https://sashatravkina.github.io/blog/assets/style.css" />
		<link rel="stylesheet" type="text/css" href="https://sashatravkina.github.io/blog/assets/css/zoom.css" />
		<link rel="stylesheet" type="text/css" href="https://sashatravkina.github.io/blog/assets/css/fotorama.css" />
		<link rel="stylesheet" type="text/css" href="https://sashatravkina.github.io/blog/assets/css/settings.css" />
		<link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">

		<!--[ JS ]-->
		<script type="text/javascript" src="https://sashatravkina.github.io/blog/assets/js/jquery.js"></script>
        <script type="text/javascript">base_url = "https://sashatravkina.github.io/blog";</script>

        <!--[ Schema ]-->
		<script type="application/ld+json">

	
	
	{  
		"@context":"http://schema.org",
		"@type":"BlogPosting",
		"headline":"Хакинтош на PC",
		"genre":"",
		"keywords":"Гайды, ОС",
		"wordCount":"1085",
		"url":"https://sashatravkina.github.io/blog/blog/hackintosh-na-pc/",
		"datePublished":"2018-06-04",
		"dateModified":"2018-06-04",
		"author":{  
			"@type":"Person",
			"name":"Александра Травкина",
			"sameAs":[  
				"https://twitter.com/sasha_travkina",
				"https://github.com/sashatravkina",
				"https://t.me/sashatravkina"
			]
		},
		"publisher":{  
			"@type":"Person",
			"name":"Александра Травкина",
			"sameAs":[  
				"https://twitter.com/sasha_travkina",
				"https://github.com/sashatravkina",
				"https://t.me/sashatravkina"
			]
		},
		"image":{  
			"@type":"ImageObject",
			"contentUrl":"",
			"url":"https://sashatravkina.github.io/blog/",
			"height":"360",
			"width":"640"
		},
		"mainEntityOfPage":{  
			"@type":"WebPage",
			"@id":"https://sashatravkina.github.io/blog/"
		},
		"articleBody":"Расставшись со своим тормозящим MacBook Air в пользу домашнего компьютера, я столкнулась с вопросом о том, какой операционной системой пользоваться вместо удобной и ставшей уже привычной OS X. Windows 10, пожалуй, подходит только для игр, а linux не слишком дружелюбна к пользователю. А потому, вместо покупки очередного яблочного девайса, было принято решение поставить hackintosh на свой свежесобранный PC. Первым опытом установки которого я и хотела бы поделиться, для себя и для вас.											Собственно, характеристики компьютера на котором и был поднят hackintosh:  Корпус: Raijintek Metis Red.  Материнская плата: ASRock Z370M-ITX/ac.  Процессор: i7-8700T.  Оперативная память: GoodRam DDR4 2133MHz 16GB Kit 2x8GB.  SSD: KingDian N480 240GB, KingDian S280 480GB, Micron 1100 MTFDDAK256TBN Media.  Wi-Fi: Broadcom BCM94352Z NGFF Dual Band 802.11ac 867M Wifi BT 4.0 Lenovo FRU 04X6020.  Блок питания: Corsair RM550x.В качестве видеокарты пока используется встроенная Intel UHD630. А для того, чтобы Wi-Fi материнской платы заработал в hackintosh пришлось покупать на ebay новый модуль - Broadcom BCM4352, так как для стандартного модуля от Intel нет необходимых kext’ов.Образ дискаДля установки hackintosh я скачала образ с High Sierra 10.13.4 (Сейчас там более актуальная версия) с небезиветсного rutracker.org и по инструкции из темы записала его на флешку.ПрограммыДля установки и настройки OS X понадобится некоторый набор программ, которые ставятся после первого запуска операционной системы. Можно заранее скачать их на свободную флешку так как сразу после установки интернета еще не будет.  Clover EFI Bootloader - Загрузчик EFI, позволяет запускать hackintosh, windows, linux и их вместе. (sourceforge.net)  Clover Configurator - Для более легкой правки config.plist Clover’a. (tonymacx86.com)  EFI Mounter - Программа для монтирования EFI раздела диска hackintosh. (tonymacx86.com)  Kext Utility - Утилита для установки kext’ов. (insanelymac.com)KextИли «kernel extension», можно назвать их своего рода драйверами для hackintosh.  FakeSMC - эмулирует работу SMC контроллера который передает операционной системе информацию о компьютере, температуре процессора и т.д. Обязателен для запуска hackintosh. (bitbucket.org)  FakePCIID - Перехватывает запросы PCI-ID, и возвращает значение, указанное через FakeID в Clover. Понадобится для работы некоторых kext’ов wi-fi и встроенной графики. (bitbucket.org)  BrcmPatchRAM - Kext’ы для работы Wi-Fi модуля Broadcom. (bitbucket.org)  VoodooHD - Универсальный kext для аудио. (sourceforge.net)  AppleALC - Альтернативный kext аудио. (github.com)  IntelMausiEthernet - Kext для запуска Intel ethernet. (bitbucket.org)  IntelGraphicsFixup - Фикс для различных встроенных видеокарт от Intel. (github.com)  Shiki - Исправление возможных проблем с воспроизведеним видео. (github.com)  Lilu - Расширение для поддержки различных kext’ов. (github.com)УстановкаЗагрузившись с установочной флешки в режиме UEFI приступаем к установке. В окне Clover выбираем «Boot Mac OS from OS X Base System» и дожидаемся появления установки OS X, на что уйдет до пяти минут. Переходим в дисковую утилиту и форматируем нужный диск. На одном из SSD дисков я оставила уже установленную ранее Windows 10, а другой SSD отформатировала из установщика в формат AFPS назвав его классическим Macintosh HD. Устанавливаем OS X и дожидаемся перезагрузки. После перезагрузки вновь видим Clover.Так как у меня встроенная видеокарта Intel UHD630, то мне пришлось прописать параметр загрузки -disablegfxfirmware чтобы установка продолжилась дальше после циклической перезагрузки с ошибкой «Begin Gfx firmware load process». Чтобы прописать параметр загрузки в Clover откройте раздел Options, в строке Boot Args впишите -disablegfxfirmware и нажмите Enter.После установки оказываемся в OS X и первым делом устанавливаем ранее скачанный Clover EFI Bootloader. В пункте Тип установки выбираем Настройки и расставляем галочки:											Далее, устанавливаем и запускаем Kext Utility, дожидаемся сообщения «Drag files on window to process them» и перетаскиваем прямо в окно программы необходимые kext’ы.											Вот перечень kext’ов установленных у меня:  FakeSMC.kext  FakeSMC_LPCSensors.kext  FakeSMC_GPUSensors.kext  FakeSMC_CPUSensors.kext  FakeSMC_ACPISensors.kext  FakePCIID.kext  FakePCIID_Intel_HD_Graphics.kext  FakePCIID_Broadcom_WiFi.kext  BrcmFirmwareData.kext  BrcmPatchRAM2.kext  IntelGraphicsFixup.kext  IntelMausiEthernet.kext  VoodooHDA.kext  Shiki.kext  Lilu.kextТакже поместите ваши kext’ы в папку EFI/EFI/CLOVER/kexts/Other для загрузчика Clover.Если диск отформатирован в AFPS может понадобится исправить проблему с загрузкой:  В Finder - Переход - Переход к папке  Ввести /usr/standalone/i386/  Скопировать apfs.efi в /EFI/EFI/CLOVER/drivers64UEFI/Конфигурация Clover редактируется в файле EFI/EFI/CLOVER/config.plist. Его можно править программой Clover Configurator или вручную, с помощью Microsoft Visual Studio Code.Исправление совместимости Intel UHD 630 на Coffee LakeПосле установки в config.plist, в раздел Boot - Arguments я добавила параметр -disablegfxfirmware.Возникшее мерцание изображения, на встроенной графике процессора поколения Coffee Lake, исправляется по несложной инструкции. Открыть терминал и ввести:sudo nano /System/Library/Extensions/AppleIntelKBLGraphics.kext/Contents/Info.plistВ открывшемся файле, в терминале, найти внизу файла:&amp;lt;key&amp;gt;IOPCIPrimaryMatch&amp;lt;/key&amp;gt;В конце следующей строки - &amp;lt;string&amp;gt;, найти 0x3E928086 и перед ним добавить 0x3E918086.											Сохраняем изменения файла комбинацией Ctrl + X, соглашаемся с изменениями Y и нажимаем Enter.Далее, в терминале открываем файл:sudo nano /System/Library/Extensions/AppleIntelKBLGraphicsFramebuffer.kext/Contents/Info.plistВ котором ищем &amp;lt;key&amp;gt;IOPCIPrimaryMatch&amp;lt;/key&amp;gt;, где в конец строки &amp;lt;string&amp;gt; добавляем 0x3E918086 0x3E928086.											Очищаем кеш командой:sudo kextcache -i /sudo touch /System/Library/Extensions &amp;amp;&amp;amp; sudo kextcache -u /Исправление громкости VoodooHDA.kextИногда VoodooHDA.kext выдает звук тише, чем в Windows 10. Исправить можно открыв kext правой кнопко мыши Показать содержимое пакета - Папка Contents - Открыть редактором файл Info.plist.Найти строку VoodooHDAEnableHalfVolumeFix и изменить занчение следующей строки на &amp;lt;true/&amp;gt;.Если значительных изменеий не произолшло, можно найти блок:&amp;lt;key&amp;gt;PCM&amp;lt;/key&amp;gt;&amp;lt;integer&amp;gt;90&amp;lt;/integer&amp;gt;&amp;lt;key&amp;gt;Rec&amp;lt;/key&amp;gt;&amp;lt;integer&amp;gt;90&amp;lt;/integer&amp;gt;&amp;lt;key&amp;gt;iGain&amp;lt;/key&amp;gt;&amp;lt;integer&amp;gt;90&amp;lt;/integer&amp;gt;&amp;lt;key&amp;gt;iMix&amp;lt;/key&amp;gt;&amp;lt;integer&amp;gt;90&amp;lt;/integer&amp;gt;И изменить все 90 на 100, затем переустановить kext.В итогеТаким образом был установлен hackintosh 10.13.4, который вскоре, без каких либо проблем, обновился до 10.13.5.											Привязка к учетной записи, логин в iCloud и прочих Apple сервисах прошли без каких-либо проблем. Операционная система работает стабильно, а установка не столь сложна, как это казалось на первый взгляд. Проблемы возникли только с поддержкой Wi-Fi модуля, из-за чего пришлось покупать Broadcom BCM4352 и ждать его доставки из Китая. В итоге, на одном из SSD у меня установлен Windows 10 для игр, а на другом hackintosh, загружаемый по умолчанию. Выбор системы происходит при загрузке в Clover.Использовались материалы  Статья с habrahabr.  Опыт человека с аналогичной материнской платой на tonymacx86.com.  Инструкция по исправлению Intel UHD 630, на hackintosher.com.  Образ с rutracker.org."
	}


</script>

		<link href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;subset=cyrillic" rel="stylesheet">
		
	</head>

	<body class="themplate-post space-out-h-zero-xs space-out-v-zero-xs space-in-h-mili-xs space-in-h-zero-lg m-scrollable-filter">
<header class="space-in-v-mili-xs header" role="banner">
    <div class="space-auto-h-xs logo">
        <a href="/blog/blog/">
            <img srcset="/blog/blog/assets/images/avatar_96x96.png 2x, /assets/images/avatar_192x192.png 4x" src="/blog/blog/assets/images/avatar_64x64.png" width="64" height="64" alt="Блог Александры Травкиной">
        </a>
    </div>
</header>

<main class="main" role="main">
    <article class="article">
        <time> 4 июня 2018</time>
        <h1>Хакинтош на PC</h1>
        <p>Расставшись со своим тормозящим <a href="/blog/blog/znakomstvo-s-mac/">MacBook Air</a> в пользу домашнего компьютера, я столкнулась с вопросом о том, какой операционной системой пользоваться вместо удобной и ставшей уже привычной <span class="caps">OS</span> X. Windows 10, пожалуй, подходит только для игр, а linux не слишком дружелюбна к пользователю. А потому, вместо покупки очередного яблочного девайса, было принято решение поставить hackintosh на свой свежесобранный <span class="caps">PC.</span> Первым опытом установки которого я и хотела бы поделиться, для себя и для&nbsp;вас.</p>

<figure class="picture">
				<img src="/blog/media/004.jpg" data-action="zoom">
				
			</figure>

<p>Собственно, характеристики компьютера на котором и был поднят&nbsp;hackintosh:</p>

<ul>
  <li>Корпус: Raijintek Metis&nbsp;Red.</li>
  <li>Материнская плата: ASRock&nbsp;<span class="caps">Z370M</span>-<span class="caps">ITX</span>/ac.</li>
  <li>Процессор:&nbsp;i7-<span class="caps">8700T.</span></li>
  <li>Оперативная память: GoodRam <span class="caps">DDR4</span> 2133MHz <span class="caps">16GB</span> Kit&nbsp;2x<span class="caps">8GB.</span></li>
  <li><span class="caps">SSD</span>: KingDian <span class="caps">N480</span> <span class="caps">240GB</span>, KingDian <span class="caps">S280</span> <span class="caps">480GB</span>, Micron 1100 <span class="caps">MTFDDAK256TBN</span>&nbsp;Media.</li>
  <li>Wi-Fi: Broadcom <span class="caps">BCM94352Z</span> <span class="caps">NGFF</span> Dual Band 802.11ac <span class="caps">867M</span> Wifi <span class="caps">BT</span> <span class="caps">4.0</span> Lenovo <span class="caps">FRU</span>&nbsp;<span class="caps">04X6020.</span></li>
  <li>Блок питания: Corsair&nbsp;RM550x.</li>
</ul>

<p>В качестве видеокарты пока используется встроенная Intel <span class="caps">UHD630.</span> А для того, чтобы Wi-Fi материнской платы заработал в hackintosh пришлось покупать <a href="https://www.ebay.com/itm/Broadcom-BCM94352Z-NGFF-Dual-Band-802-11ac-867M-Wifi-BT-4-0-Lenovo-FRU-04X6020/191855727748?ssPageName=STRK:MEBIDX:IT&amp;_trksid=p2060353.m2749.l2649" rel="nofollow" target="_blank">на ebay</a> новый модуль - Broadcom <span class="caps">BCM4352</span>, так как для стандартного модуля от Intel нет необходимых&nbsp;kext’ов.</p>

<h2 id="образ-диска">Образ&nbsp;диска</h2>

<p>Для установки hackintosh я скачала <a href="https://rutracker.org/forum/viewtopic.php?t=5413589" rel="nofollow" target="_blank">образ с High Sierra <span class="caps">10.13.4</span></a> (Сейчас там более актуальная версия) с небезиветсного rutracker.org и по инструкции из темы записала его на&nbsp;флешку.</p>

<h2 id="программы">Программы</h2>

<p>Для установки и настройки <span class="caps">OS</span> X понадобится некоторый набор программ, которые ставятся после первого запуска операционной системы. Можно заранее скачать их на свободную флешку так как сразу после установки интернета еще не&nbsp;будет.</p>

<ul>
  <li>
<strong>Clover <span class="caps">EFI</span> Bootloader</strong> - Загрузчик <span class="caps">EFI</span>, позволяет запускать hackintosh, windows, linux и их вместе. (<a href="https://sourceforge.net/projects/cloverefiboot/" rel="nofollow" target="_blank">sourceforge.net</a>)</li>
  <li>
<strong>Clover Configurator</strong> - Для более легкой правки config.plist Clover’a. (<a href="https://www.tonymacx86.com/resources/clover-configurator.335/" rel="nofollow" target="_blank">tonymacx86.com</a>)</li>
  <li>
<strong><span class="caps">EFI</span> Mounter</strong> - Программа для монтирования <span class="caps">EFI</span> раздела диска hackintosh. (<a href="https://www.tonymacx86.com/resources/efi-mounter-v3.280/" rel="nofollow" target="_blank">tonymacx86.com</a>)</li>
  <li>
<strong>Kext Utility</strong> - Утилита для установки kext’ов. (<a href="https://www.insanelymac.com/forum/topic/140647-latest-kext-utility-macos-sierra-super-speed-edition/" rel="nofollow" target="_blank">insanelymac.com</a>)</li>
</ul>

<h2 id="kext">Kext</h2>

<p>Или «kernel extension», можно назвать их своего рода драйверами для&nbsp;hackintosh.</p>

<ul>
  <li>
<strong>Fake<span class="caps">SMC</span></strong> - эмулирует работу <span class="caps">SMC</span> контроллера который передает операционной системе информацию о компьютере, температуре процессора и т.д. Обязателен для запуска hackintosh. (<a href="https://bitbucket.org/RehabMan/os-x-fakesmc-kozlek/downloads/" rel="nofollow" target="_blank">bitbucket.org</a>)</li>
  <li>
<strong>Fake<span class="caps">PCIID</span></strong> - Перехватывает запросы <span class="caps">PCI</span>-<span class="caps">ID</span>, и возвращает значение, указанное через Fake<span class="caps">ID</span> в Clover. Понадобится для работы некоторых kext’ов wi-fi и встроенной графики. (<a href="https://bitbucket.org/RehabMan/os-x-fake-pci-id/downloads/" rel="nofollow" target="_blank">bitbucket.org</a>)</li>
  <li>
<strong>BrcmPatch<span class="caps">RAM</span></strong> - Kext’ы для работы Wi-Fi модуля Broadcom. (<a href="https://bitbucket.org/RehabMan/os-x-brcmpatchram/downloads/" rel="nofollow" target="_blank">bitbucket.org</a>)</li>
  <li>
<strong>Voodoo<span class="caps">HD</span></strong> - Универсальный kext для аудио. (<a href="https://sourceforge.net/projects/voodoohda/files/latest/download" rel="nofollow" target="_blank">sourceforge.net</a>)</li>
  <li>
<strong>Apple<span class="caps">ALC</span></strong> - Альтернативный kext аудио. (<a href="https://github.com/vit9696/AppleALC/releases" rel="nofollow" target="_blank">github.com</a>)</li>
  <li>
<strong>IntelMausiEthernet</strong> - Kext для запуска Intel ethernet. (<a href="https://bitbucket.org/RehabMan/os-x-intel-network/downloads/" rel="nofollow" target="_blank">bitbucket.org</a>)</li>
  <li>
<strong>IntelGraphicsFixup</strong> - Фикс для различных встроенных видеокарт от Intel. (<a href="https://github.com/lvs1974/IntelGraphicsFixup/releases" rel="nofollow" target="_blank">github.com</a>)</li>
  <li>
<strong>Shiki</strong> - Исправление возможных проблем с воспроизведеним видео. (<a href="https://github.com/vit9696/Shiki/releases" rel="nofollow" target="_blank">github.com</a>)</li>
  <li>
<strong>Lilu</strong> - Расширение для поддержки различных kext’ов. (<a href="https://github.com/vit9696/Lilu/releases" rel="nofollow" target="_blank">github.com</a>)</li>
</ul>

<h2 id="установка">Установка</h2>

<p>Загрузившись с установочной флешки в режиме <span class="caps">UEFI</span> приступаем к установке. В окне Clover выбираем «Boot Mac <span class="caps">OS</span> from <span class="caps">OS</span> X Base System» и дожидаемся появления установки <span class="caps">OS</span> X, на что уйдет до пяти минут. Переходим в дисковую утилиту и форматируем нужный диск. На одном из <span class="caps">SSD</span> дисков я оставила уже установленную ранее Windows 10, а другой <span class="caps">SSD</span> отформатировала из установщика в формат <code class="highlighter-rouge">AFPS</code> назвав его классическим <code class="highlighter-rouge">Macintosh HD</code>. Устанавливаем <span class="caps">OS</span> X и дожидаемся перезагрузки. После перезагрузки вновь видим&nbsp;Clover.</p>

<p>Так как у меня встроенная видеокарта Intel <span class="caps">UHD630</span>, то мне пришлось прописать параметр загрузки <code class="highlighter-rouge">-disablegfxfirmware</code> чтобы установка продолжилась дальше после циклической перезагрузки с ошибкой «Begin Gfx firmware load process». Чтобы прописать параметр загрузки в Clover откройте раздел <code class="highlighter-rouge">Options</code>, в строке <code class="highlighter-rouge">Boot Args</code> впишите <code class="highlighter-rouge">-disablegfxfirmware</code> и нажмите&nbsp;Enter.</p>

<p>После установки оказываемся в <span class="caps">OS</span> X и первым делом устанавливаем ранее скачанный <strong>Clover <span class="caps">EFI</span> Bootloader</strong>. В пункте <code class="highlighter-rouge">Тип установки</code> выбираем <code class="highlighter-rouge">Настройки</code> и расставляем&nbsp;галочки:</p>

<figure class="picture">
				<img src="/blog/media/005.jpg" data-action="zoom">
				
			</figure>

<p>Далее, устанавливаем и запускаем <strong>Kext Utility</strong>, дожидаемся сообщения «Drag files on window to process them» и перетаскиваем прямо в окно программы необходимые&nbsp;kext’ы.</p>

<figure class="picture">
				<img src="/blog/media/006.jpg" data-action="zoom">
				
			</figure>

<p>Вот перечень kext’ов установленных у&nbsp;меня:</p>

<ul>
  <li>Fake<span class="caps">SMC</span>.kext</li>
  <li>FakeSMC_LPCSensors.kext</li>
  <li>FakeSMC_GPUSensors.kext</li>
  <li>FakeSMC_CPUSensors.kext</li>
  <li>FakeSMC_ACPISensors.kext</li>
  <li>Fake<span class="caps">PCIID</span>.kext</li>
  <li>FakePCIID_Intel_HD_Graphics.kext</li>
  <li>FakePCIID_Broadcom_WiFi.kext</li>
  <li>BrcmFirmwareData.kext</li>
  <li>BrcmPatch<span class="caps">RAM2</span>.kext</li>
  <li>IntelGraphicsFixup.kext</li>
  <li>IntelMausiEthernet.kext</li>
  <li>Voodoo<span class="caps">HDA</span>.kext</li>
  <li>Shiki.kext</li>
  <li>Lilu.kext</li>
</ul>

<p>Также поместите ваши kext’ы в папку <code class="highlighter-rouge">EFI/EFI/CLOVER/kexts/Other</code> для загрузчика&nbsp;Clover.</p>

<p>Если диск отформатирован в <code class="highlighter-rouge">AFPS</code> может понадобится исправить проблему с&nbsp;загрузкой:</p>
<ul>
  <li>В Finder - Переход - Переход к&nbsp;папке</li>
  <li>Ввести&nbsp;<code class="highlighter-rouge">/usr/standalone/i386/</code>
</li>
  <li>Скопировать <code class="highlighter-rouge">apfs.efi</code> в&nbsp;<code class="highlighter-rouge">/EFI/EFI/CLOVER/drivers64UEFI/</code>
</li>
</ul>

<p>Конфигурация Clover редактируется в файле <code class="highlighter-rouge">EFI/EFI/CLOVER/config.plist</code>. Его можно править программой <strong>Clover Configurator</strong> или вручную, с помощью <strong>Microsoft Visual Studio Code</strong>.</p>

<h2 id="исправление-совместимости-intel-uhd-630-на-coffee-lake">Исправление совместимости Intel <span class="caps">UHD</span> 630 на Coffee&nbsp;Lake</h2>

<p>После установки в <code class="highlighter-rouge">config.plist</code>, в раздел <code class="highlighter-rouge">Boot</code> - <code class="highlighter-rouge">Arguments</code> я добавила параметр&nbsp;<code class="highlighter-rouge">-disablegfxfirmware</code>.</p>

<p>Возникшее мерцание изображения, на встроенной графике процессора поколения Coffee Lake, исправляется по несложной инструкции. Открыть терминал и&nbsp;ввести:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>nano /System/Library/Extensions/AppleIntelKBLGraphics.kext/Contents/Info.plist</code></pre></figure>

<p>В открывшемся файле, в терминале, найти внизу&nbsp;файла:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">&lt;key&gt;IOPCIPrimaryMatch&lt;/key&gt;</code></pre></figure>

<p>В конце следующей строки - <code class="highlighter-rouge">&lt;string&gt;</code>, найти <code class="highlighter-rouge">0x3E928086</code> и перед ним добавить&nbsp;<code class="highlighter-rouge">0x3E918086</code>.</p>

<figure class="picture">
				<img src="/blog/media/007.jpg" data-action="zoom">
				
			</figure>

<p>Сохраняем изменения файла комбинацией <code class="highlighter-rouge">Ctrl + X</code>, соглашаемся с изменениями <code class="highlighter-rouge">Y</code> и нажимаем&nbsp;<code class="highlighter-rouge">Enter</code>.</p>

<p>Далее, в терминале открываем&nbsp;файл:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>nano /System/Library/Extensions/AppleIntelKBLGraphicsFramebuffer.kext/Contents/Info.plist</code></pre></figure>

<p>В котором ищем <code class="highlighter-rouge">&lt;key&gt;IOPCIPrimaryMatch&lt;/key&gt;</code>, где в конец строки <code class="highlighter-rouge">&lt;string&gt;</code> добавляем&nbsp;<code class="highlighter-rouge">0x3E918086 0x3E928086</code>.</p>

<figure class="picture">
				<img src="/blog/media/008.jpg" data-action="zoom">
				
			</figure>

<p>Очищаем кеш&nbsp;командой:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>kextcache <span class="nt">-i</span> /
<span class="nb">sudo touch</span> /System/Library/Extensions <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>kextcache <span class="nt">-u</span> /</code></pre></figure>

<h2 id="исправление-громкости-voodoohdakext">Исправление громкости&nbsp;Voodoo<span class="caps">HDA</span>.kext</h2>

<p>Иногда Voodoo<span class="caps">HDA</span>.kext выдает звук тише, чем в Windows 10. Исправить можно открыв kext правой кнопко мыши <code class="highlighter-rouge">Показать содержимое пакета</code> - Папка <code class="highlighter-rouge">Contents</code> - Открыть редактором файл&nbsp;<code class="highlighter-rouge">Info.plist</code>.</p>

<p>Найти строку <code class="highlighter-rouge">VoodooHDAEnableHalfVolumeFix</code> и изменить занчение следующей строки на&nbsp;<code class="highlighter-rouge">&lt;true/&gt;</code>.</p>

<p>Если значительных изменеий не произолшло, можно найти&nbsp;блок:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;key&gt;</span>PCM<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;integer&gt;</span>90<span class="nt">&lt;/integer&gt;</span>
<span class="nt">&lt;key&gt;</span>Rec<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;integer&gt;</span>90<span class="nt">&lt;/integer&gt;</span>
<span class="nt">&lt;key&gt;</span>iGain<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;integer&gt;</span>90<span class="nt">&lt;/integer&gt;</span>
<span class="nt">&lt;key&gt;</span>iMix<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;integer&gt;</span>90<span class="nt">&lt;/integer&gt;</span></code></pre></figure>

<p>И изменить все <code class="highlighter-rouge">90</code> на <code class="highlighter-rouge">100</code>, затем переустановить&nbsp;kext.</p>

<h2 id="в-итоге">В&nbsp;итоге</h2>

<p>Таким образом был установлен hackintosh <span class="caps">10.13.4</span>, который вскоре, без каких либо проблем, обновился до&nbsp;<span class="caps">10.13.5.</span></p>

<figure class="picture">
				<img src="/blog/media/009.jpg" data-action="zoom">
				
			</figure>

<p>Привязка к учетной записи, логин в iCloud и прочих Apple сервисах прошли без каких-либо проблем. Операционная система работает стабильно, а установка не столь сложна, как это казалось на первый взгляд. Проблемы возникли только с поддержкой Wi-Fi модуля, из-за чего пришлось покупать Broadcom <span class="caps">BCM4352</span> и ждать его доставки из Китая. В итоге, на одном из <span class="caps">SSD</span> у меня установлен Windows 10 для игр, а на другом hackintosh, загружаемый по умолчанию. Выбор системы происходит при загрузке в&nbsp;Clover.</p>

<h2 id="использовались-материалы">Использовались&nbsp;материалы</h2>

<ul>
  <li>Статья с <a href="https://habr.com/post/318448/" rel="nofollow" target="_blank">habrahabr</a>.</li>
  <li>Опыт человека с аналогичной материнской платой на <a href="https://www.tonymacx86.com/threads/eriks-tiny-but-mighty-htpc-asrock-z370m-itx-ac-i5-8400-uhd-630-graphics-high-sierra.239157/" rel="nofollow" target="_blank">tonymacx86.com</a>.</li>
  <li>Инструкция по исправлению Intel <span class="caps">UHD</span> 630, на <a href="https://hackintosher.com/forums/thread/coffee-lake-uhd-630-graphics-framebuffer-injection-0x3e918086-0x3e928086-for-high-sierra.210/" rel="nofollow" target="_blank">hackintosher.com</a>.</li>
  <li>Образ с <a href="https://rutracker.org/forum/viewtopic.php?t=5413589" rel="nofollow" target="_blank">rutracker.org</a>.</li>
</ul>


    </article>
    <nav class="row row-between-xs row-middle-xs space-in-v-kilo-xs wrapper bloglinks">
        <span class="col-xs-4 space-in-v-nano-xs space-in-v-zero-xs space-in-h-zero-xs previous">
            
                <a href="/blog/blog/far-cry-5-sektantskaja-zhvachka/">&lsaquo; Far Cry 5 · Сектантская жвачка</a><br>
            
        </span>
    
        <span class="col-xs-4 space-in-v-nano-xs space-in-v-zero-xs space-in-h-zero-xs next">
            
                <a href="/blog/blog/graficheskij-planshet-xp-pen-star-g640/">Графический планшет Xp-Pen Star G640 &rsaquo;</a>
            
        </span>
    </nav>
</main>

		<!-- JS -->
		<script src="https://sashatravkina.github.io/blog/assets/js/jekyll-search.js"></script>
		<script src="https://sashatravkina.github.io/blog/assets/js/zoom.js"></script>
		<script src="https://sashatravkina.github.io/blog/assets/js/fotorama.js"></script>
		<script src="https://sashatravkina.github.io/blog/assets/js/template.js"></script>

	</body>
</html>