<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Пишем свой шаблон для Эгеи</title>

		<!--[ Meta ]-->
			<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="robots" content="index, follow" />

	<meta name="author" content="Александра Травкина">
	<meta name="generator" content="Jekyll v3.8.4" />

	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="Fixel">
	<meta name="twitter:creator" content="@sasha_travkina">
	<meta name="twitter:title" content="Пишем свой шаблон для Эгеи &middot; Fixel">
	<meta name="twitter:description" content="Написать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры. Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так,...">
	<meta name="twitter:image" content="https://res.cloudinary.com/milkleaks/image/upload/c_thumb,h_360,q_100,w_640/v1519562826/thumb_hp106z.jpg">

	<meta property="og:title" content="Пишем свой шаблон для Эгеи &middot; Fixel" />
	<meta property="og:site_name" content="Fixel">	
	<meta property="og:url" content="https://fixel.ru/blog/pishem-svoy-shablon-dlya-egei/">
	<meta property="og:description" content="Написать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры. Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так,..."/>
	<meta property="og:image" content="https://res.cloudinary.com/milkleaks/image/upload/c_thumb,h_360,q_100,w_640/v1519562826/thumb_hp106z.jpg" />
	<meta property="og:image:height" content="360">
	<meta property="og:image:width" content="640">
	<meta property="og:type" content="article">
	<meta property="og:locale" content="ru">

	<!--[ Favicons ]-->
	<link rel="icon" type="image/png" sizes="32x32" href="https://fixel.ru/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://fixel.ru/favicon-16x16.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://fixel.ru/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://fixel.ru/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://fixel.ru/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://fixel.ru/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://fixel.ru/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://fixel.ru/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://fixel.ru/apple-touch-icon-180x180.png">
	<link rel="manifest" href="https://fixel.ru/manifest.json">
	<link rel="mask-icon" href="https://fixel.ru/favicon.svg">

	<!--[ Control ]-->
	<meta name="yandex-verification" content="f96ef0e811161c03" />
	<meta name="google-site-verification" content="jqmtruexSTI1O_HYicSlVMgM4nNh_Di_7zlyTbYlMc8" />

	<!--[ Feed ]-->
	<link rel="canonical" href="https://fixel.ru/blog/pishem-svoy-shablon-dlya-egei/">
	<link rel="alternate" type="application/rss+xml" title="Fixel" href="https://fixel.ru/feed.xml" />
		
		<!--[ CSS ]-->
		<link rel="stylesheet" type="text/css" href="/static/style.css" />

		<!--[ JS ]-->
		<script type="text/javascript" src="/static/js/jquery.js"></script>
<script type="text/javascript" src="/static/modules/primarycolor/primarycolor.js"></script>
<script type="text/javascript" src="/static/modules/chart/chart.min.js"></script>
<script type="text/javascript" src="/static/modules/infinite-scroll/infinite-scroll.pkgd.min.js"></script>
		<script type="text/javascript">base_url = "https://fixel.ru";</script>
		<script type="application/ld+json">

	
	

	{  
		"@context":"http://schema.org",
		"@type":"BlogPosting",
		"headline":"Пишем свой шаблон для Эгеи",
		"genre":"Веб",
		"keywords":"Эгея, Гайд",
		"wordCount":"1528",
		"url":"https://fixel.ru/blog/pishem-svoy-shablon-dlya-egei/",
		"datePublished":"2017-04-29",
		"dateModified":"2017-04-29",
		"author":{  
			"@type":"Person",
			"name":"Александра Травкина",
			"sameAs":[  
				"https://twitter.com/sasha_travkina",
				"https://github.com/sashatravkina",
				"https://t.me/sashatravkina"
			]
		},
		"publisher":{  
			"@type":"Person",
			"name":"Александра Травкина",
			"sameAs":[  
				"https://twitter.com/sasha_travkina",
				"https://github.com/sashatravkina",
				"https://t.me/sashatravkina"
			]
		},
		"image":{  
			"@type":"ImageObject",
			"contentUrl":"https://res.cloudinary.com/milkleaks/image/upload/c_thumb,h_360,q_100,w_640/v1519562826/thumb_hp106z.jpg",
			"url":"https://fixel.ru/",
			"height":"360",
			"width":"640"
		},
		"mainEntityOfPage":{  
			"@type":"WebPage",
			"@id":"https://fixel.ru/"
		},
		"articleBody":"Написать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры.  Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так, как хотим чтобы назывался наш шаблон. Например «ghost» — ../themes/ghost.  Файл с каринкой-превьюшкой вашего шаблона должен называться preview@2x.png и находится в корне шаблона.  Информация о вашем шаблоне хранится в файле theme-info.php в корневой папке шаблона и содержит в себе:&amp;lt;?php return array (    'display_name' =&amp;gt; array (        'en' =&amp;gt; 'Ghost',        'ru' =&amp;gt; 'Призрак',    ),); ?&amp;gt;Называем свою тему для русской и английской версии для отображения в настройках сайта.Структура папок    ../themes/ghost/images — Папка с изображениями темы.    ../themes/ghost/js — Папка со скриптами.    ../themes/ghost/styles — Папка со стилями.    ../themes/ghost/templates — Файлы шаблона.Если файлов в папках вашего шаблона нет, они будут браться из стандартной темы Эгеи, которая располагается по пути ../system/theme.ШаблоныТеперь стоит подробнее разобрать содержимое папки ../system/theme/templates стандартного шаблона Эгеи. Чтобы понять как выглядит тот или иной элемент шаблона я добавила скриншоты.author-menu.tmpl.php — Меню автора.																				comments-heading.tmpl.php — Заголовок списка комментариев с счетчиком их количества.																				comments.tmpl.php — Список комментариев.																				drafts.tmpl.php — Список черновиков.																				form-comment.tmpl.php — Форма комментирования.																				form-database.tmpl.php — Форма подключения к базе данных.																				form-install.tmpl.php — Форма установки Эгеи.form-login.tmpl.php — Форма авторизации.																				form-note-delete.tmpl.php — Форма удаления поста.																				form-note-publish.tmpl.php — Кнопка публикации поста.																				form-note.tmpl.php — Форма публикации поста.																				form-password.tmpl.php — Форма смены админ-пароля.																				form-preferences.tmpl.php — Форма общих настроек блога.																				form-tag-delete.tmpl.php — Форма удаления тега.																				form-tag.tmpl.php — Форма редактирования тега.																				head.tmpl.php — Метатеги в head.heading.tmpl.php — Заголовки.																				init-script.tmpl.php — Подключение дополнительных скриптов.layout.tmpl.php — Основная разметка шаблона внтури body.login-element.tmpl.php — Кнопка авторизации.																				main.tmpl.php — Общая разметка, подключение скриптов.notes-list.tmpl.php — Список избранных постов.notes.tmpl.php — Шаблон поста. Заголовок, текст, дата, теги, ссылка на комментарии.pages-earlier.tmpl.php — Кнопка к постам «Ранее».																				pages-later.tmpl.php — Кнопка к постам «Позднее».																				pages.tmpl.php — Навигация между постами.																				popular.tmpl.php — Блок популярных постов.																				search.tmpl.php — Форма поиска и теги.																				tags-menu.tmpl.php — Список избранных тегов.																				tags.tmpl.php — Страница тегов.																				user-blockture.tmpl.php — Аватар блога.																				Чтобы внести изменения в ту или иную часть шаблона скопируйте соответствующий файл из стандартной темы ../system/theme/templates в папку templates вашего шаблона и уже там производите все изменения.Подключение частей шаблонаОфициальная документация по шаблонам Эгеи сообщает:  Шаблон может вызывать другие шаблоны для отображения конкретного фрагмента:_T () — вызывает шаблон по имени._T_FOR () — вызывает шаблон по имени, если в массиве $content есть ключ с таким именем._X () — вставляет дополнительный блок (не забывайте это использовать в своих шаблонах там, где это делают комплектные).Шаблон layout.tmpl.php «срабатывает» потому, что main.tmpl.php вызывает его для формирования тела страницы.Давайте разберем это на примере — добавим блок со случайной цитатой. Создадим файл quote.tmpl.php в ../themes/ghost/templates со следующим несложным кодом:&amp;lt;div class=&quot;e2-quote&quot;&amp;gt;    &amp;lt;?php        $quotes[] = '        &amp;lt;p&amp;gt;Ибо здесь, похоже, мы не найдем ничего, кроме, как сказала бы Мильва, ремонтизма.&amp;lt;/p&amp;gt;        &amp;lt;span&amp;gt;Анджей Сапковский - Владычица Озера&amp;lt;/span&amp;gt;';        $quotes[] = '        &amp;lt;p&amp;gt;Цири громко чертыхнулась, повторив любимое выражение Весемира, значение которого было ей не вполне ясно. Потом добавила еще несколько слов, услышанных от Ярпена Зигрина, значение которых было для нее вообще полнейшей загадкой.&amp;lt;/p&amp;gt;        &amp;lt;span&amp;gt;Анджей Сапковский - Кровь Эльфов&amp;lt;/span&amp;gt;';        $quotes[] = '        &amp;lt;p&amp;gt;Весемир кивал, время от времени вставляя замечания, из которых следовало только то, что «в его времена» все было лучше, логичнее, приличнее и здоровее.&amp;lt;/p&amp;gt;        &amp;lt;span&amp;gt;Анджей Сапковский - Последнее Желание&amp;lt;/span&amp;gt;';        srand ((double) microtime() * 1000000);        $random_number = rand(0,count($quotes)-1);        echo ($quotes[$random_number]);    ?&amp;gt;&amp;lt;/div&amp;gt;Теперь достаточно открыть layout.tmpl.php и где-нибудь перед footer’ом добавить вывод шаблона quote.tmpl.php средством специального макроса.&amp;lt;?php _T ('quote') ?&amp;gt;Чтобы блок с случайными цитатами отображался только на главной странице оберните его соответствующим параметром:&amp;lt;?php if ($content['class'] == 'frontpage') { ?&amp;gt;    &amp;lt;?php _T ('quote') ?&amp;gt;&amp;lt;?php } ?&amp;gt;Таким несложным способом вы можете добавлять новые блоки на страницы своего блога. По такому же принципу строятся все остальные страницы шаблона. Например если мы посмотрим стандартный layout.tmpl.php с 47 по 59 строку, то увидим как подхватываются почти все основные шаблоны сайта.Подключение собственных JS и CSSДля подключения JS и CSS в Эгее также существуют специальные макросы. Для наглядности откройте стандартный main.tmpl.php и посмотрите в конец файла, после закрывающегося тега body:&amp;lt;?php _CSS ('main') ?&amp;gt;&amp;lt;?php _JS ('main') ?&amp;gt;Здесь подхватываются ../js/main.js и ../styles/main.css из папки вашего шаблона. Для примера, давайте добавим анимацию появления постов с помощью wow.js. Скачайте сам wow.js и положите в папку js вашего шаблона. Также скачайте animate.css и разместите в папке styles. Откройте main.tmpl.php и подключите их:&amp;lt;?php _CSS ('animate') ?&amp;gt;&amp;lt;?php _JS ('wow') ?&amp;gt;Далее в файл init-script.tmpl.php понадобится добавить следующий код с настройками wow.js:&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;    var wow = new WOW(        {            boxClass: 'wow',            animateClass: 'animated',            offset: 0,            mobile: true,            live: true,            callback: function(box) {            },            scrollContainer: null        }    );    wow.init();&amp;lt;/script&amp;gt;Теперь остается открыть шаблон notes.tmpl.php и к основному div’у поста (18 строка) добавить класс wow fadeIn, а в main.css добавить .wow { visibility: hidden; }. По аналогии с данным примером в ваш шаблон можно добавлять какие угодно скрипты и стили.Смотрите ещё: Кат в Эгее, Свои шрифты в Эгее и Сноски на полях в Эгее."
	}


</script>

		<link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,400,400i,700,700i,900,900i|PT+Serif:400,400i,700,700i&amp;subset=cyrillic" rel="stylesheet">
	</head>

	<body class="space-in-h-micro-xs space-in-h-base-sm wrapper page-post">

<header class="row row-middle-md space-auto-h-xs space-in-top-mili-xs space-in-bottom-base-xs space-in-bottom-kilo-xl linel logo">
	<div class="col-lase-xs col-first-md col-xs-12 col-md-shrink space-in-h-zero-xs space-auto-right-md">
		<a class="link-logo" href="/">
			<img srcset="/static/images/avatar_96x96.png 2x, /static/images/avatar_192x192.png 4x" src="/static/images/avatar_48x48.png" width="48" height="48" alt="Fixel">					
		</a>
	</div>
	<div class="col-first-xs col-last-md col-xs-12 col-md space-in-bottom-mili-xs space-in-bottom-zero-md space-in-h-zero-xs space-auto-left-md search">
		<div class="search-form">
			<input type="text" id="search-input" autocomplete="off" autocapitalize="off" class="search-box">
			<span class="search-button">
				<i class="fa fa-search open" aria-hidden="true"></i>
				<i class="fa fa-times close" aria-hidden="true"></i>
			</span>
		</div>
		<div class="dropdown">
			<ul class="results" id="results-container"></ul>
		</div>
	</div>
</header>
<article class="slide-up-fade-in space-auto-h-xs content post js-toc-content">
	<time class="single">29 апреля 2017</time>
	
		<h1 class="title">Пишем свой шаблон для&nbsp;Эгеи</h1>
	
	
    
        <div class="toc js-toc"></div>
	
	
	<p>Написать свой шаблон для <a href="http://blogengine.ru" rel="nofollow" target="_blank">Эгеи</a> не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры.</p>



<ul>
  <li>Пользовательские шаблоны находятся в папке ../themes вашего блога. Создадим в ней папку и назовем ее так, как хотим чтобы назывался наш шаблон. Например «ghost» — ../themes/ghost.</li>
  <li>Файл с каринкой-превьюшкой вашего шаблона должен называться preview@2x.png и находится в корне шаблона.</li>
  <li>Информация о вашем шаблоне хранится в файле theme-info.php в корневой папке шаблона и содержит в себе:</li>
</ul>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="k">return</span> <span class="k">array</span> <span class="p">(</span>
    <span class="s1">'display_name'</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span>
        <span class="s1">'en'</span> <span class="o">=&gt;</span> <span class="s1">'Ghost'</span><span class="p">,</span>
        <span class="s1">'ru'</span> <span class="o">=&gt;</span> <span class="s1">'Призрак'</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">);</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Называем свою тему для русской и английской версии для отображения в настройках сайта.</p>

<h2 id="структура-папок">Структура папок</h2>

<div block="">
    <p><mark>../themes/ghost/images</mark> — Папка с изображениями темы.</p>
    <p><mark>../themes/ghost/js</mark> — Папка со скриптами.</p>
    <p><mark>../themes/ghost/styles</mark> — Папка со стилями.</p>
    <p><mark>../themes/ghost/templates</mark> — Файлы шаблона.</p>
</div>

<p>Если файлов в папках вашего шаблона нет, они будут браться из стандартной темы Эгеи, которая располагается по пути <code class="highlighter-rouge">../system/theme</code>.</p>

<h2 id="шаблоны">Шаблоны</h2>

<p>Теперь стоит подробнее разобрать содержимое папки <code class="highlighter-rouge">../system/theme/templates</code> стандартного шаблона Эгеи. Чтобы понять как выглядит тот или иной элемент шаблона я добавила скриншоты.</p>

<hr class="easy">

<p><code class="highlighter-rouge">author-menu.tmpl.php</code> — Меню автора.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/01_u94w7j.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/01_u94w7j.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">comments-heading.tmpl.php</code> — Заголовок списка комментариев с счетчиком их количества.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/02_dqegcp.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/02_dqegcp.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">comments.tmpl.php</code> — Список комментариев.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/03_oiureh.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/03_oiureh.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">drafts.tmpl.php</code> — Список черновиков.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/04_gegc6o.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/04_gegc6o.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-comment.tmpl.php</code> — Форма комментирования.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/05_iffrnu.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/05_iffrnu.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-database.tmpl.php</code> — Форма подключения к базе данных.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055157/06_yor8w5.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055157/06_yor8w5.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-install.tmpl.php</code> — Форма установки Эгеи.</p>

<hr class="easy">

<p><code class="highlighter-rouge">form-login.tmpl.php</code> — Форма авторизации.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/07_tyqwia.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/07_tyqwia.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-note-delete.tmpl.php</code> — Форма удаления поста.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/08_qujnf6.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/08_qujnf6.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-note-publish.tmpl.php</code> — Кнопка публикации поста.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/09_li03z6.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/09_li03z6.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-note.tmpl.php</code> — Форма публикации поста.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/10_ufuc0b.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/10_ufuc0b.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-password.tmpl.php</code> — Форма смены админ-пароля.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055158/11_hhe2au.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055158/11_hhe2au.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-preferences.tmpl.php</code> — Форма общих настроек блога.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/13_i8udli.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/13_i8udli.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-tag-delete.tmpl.php</code> — Форма удаления тега.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/14_jwipj8.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/14_jwipj8.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">form-tag.tmpl.php</code> — Форма редактирования тега.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/15_p02lox.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/15_p02lox.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">head.tmpl.php</code> — Метатеги в head.</p>

<hr class="easy">

<p><code class="highlighter-rouge">heading.tmpl.php</code> — Заголовки.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/16_sxxqud.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/16_sxxqud.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">init-script.tmpl.php</code> — Подключение дополнительных скриптов.</p>

<hr class="easy">

<p><code class="highlighter-rouge">layout.tmpl.php</code> — Основная разметка шаблона внтури body.</p>

<hr class="easy">

<p><code class="highlighter-rouge">login-element.tmpl.php</code> — Кнопка авторизации.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/17_gtjx4a.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/17_gtjx4a.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">main.tmpl.php</code> — Общая разметка, подключение скриптов.</p>

<hr class="easy">

<p><code class="highlighter-rouge">notes-list.tmpl.php</code> — Список избранных постов.</p>

<hr class="easy">

<p><code class="highlighter-rouge">notes.tmpl.php</code> — Шаблон поста. Заголовок, текст, дата, теги, ссылка на комментарии.</p>

<hr class="easy">

<p><code class="highlighter-rouge">pages-earlier.tmpl.php</code> — Кнопка к постам «Ранее».</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055159/18_z1fn67.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055159/18_z1fn67.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">pages-later.tmpl.php</code> — Кнопка к постам «Позднее».</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/19_twa7wi.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/19_twa7wi.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">pages.tmpl.php</code> — Навигация между постами.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055161/20_vsrib7.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055161/20_vsrib7.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">popular.tmpl.php</code> — Блок популярных постов.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/21_ukwlhu.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/21_ukwlhu.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">search.tmpl.php</code> — Форма поиска и теги.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/22_r7lfmw.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/22_r7lfmw.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">tags-menu.tmpl.php</code> — Список избранных тегов.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055160/23_lbl7ii.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055160/23_lbl7ii.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">tags.tmpl.php</code> — Страница тегов.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055161/24_fldmsy.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055161/24_fldmsy.png">
				</a>
				
			</figure>

<hr class="easy">

<p><code class="highlighter-rouge">user-blockture.tmpl.php</code> — Аватар блога.</p>

<figure class="picture  left wrap without-shadow">
				<a href="https://res.cloudinary.com/milkleaks/image/upload/v1519055161/25_zw1ide.png" class="lightbox-image" data-lightbox="image" rel="nofollow" target="_blank">
					<img src="https://res.cloudinary.com/milkleaks/image/upload/c_limit,w_800/v1519055161/25_zw1ide.png">
				</a>
				
			</figure>

<hr class="easy">

<p>Чтобы внести изменения в ту или иную часть шаблона скопируйте соответствующий файл из стандартной темы <code class="highlighter-rouge">../system/theme/templates</code> в папку <code class="highlighter-rouge">templates</code> вашего шаблона и уже там производите все изменения.</p>

<h2 id="подключение-частей-шаблона">Подключение частей шаблона</h2>

<p>Официальная <a href="https://docs.google.com/document/d/1yn7KCHq47oli7IH--skhymjjj2OSlXjcyGOxZ2ZEPeA/edit#heading=h.j2h2wr6xhlie" rel="nofollow" target="_blank">документация</a> по шаблонам Эгеи сообщает:</p>

<blockquote>
  <p>Шаблон может вызывать другие шаблоны для отображения конкретного фрагмента:
_T () — вызывает шаблон по имени.
_T_<span class="caps">FOR</span> () — вызывает шаблон по имени, если в массиве $content есть ключ с таким именем.
_X () — вставляет дополнительный блок (не забывайте это использовать в своих шаблонах там, где это делают комплектные).
Шаблон layout.tmpl.php «срабатывает» потому, что main.tmpl.php вызывает его для формирования тела страницы.</p>
</blockquote>

<p>Давайте разберем это на примере — добавим блок со случайной цитатой. Создадим файл <code class="highlighter-rouge">quote.tmpl.php</code> в <code class="highlighter-rouge">../themes/ghost/templates</code> со следующим несложным кодом:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"e2-quote"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span>
        <span class="nv">$quotes</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'
        &lt;p&gt;Ибо здесь, похоже, мы не найдем ничего, кроме, как сказала бы Мильва, ремонтизма.&lt;/p&gt;
        &lt;span&gt;Анджей Сапковский - Владычица Озера&lt;/span&gt;'</span><span class="p">;</span>
        <span class="nv">$quotes</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'
        &lt;p&gt;Цири громко чертыхнулась, повторив любимое выражение Весемира, значение которого было ей не вполне ясно. Потом добавила еще несколько слов, услышанных от Ярпена Зигрина, значение которых было для нее вообще полнейшей загадкой.&lt;/p&gt;
        &lt;span&gt;Анджей Сапковский - Кровь Эльфов&lt;/span&gt;'</span><span class="p">;</span>
        <span class="nv">$quotes</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'
        &lt;p&gt;Весемир кивал, время от времени вставляя замечания, из которых следовало только то, что «в его времена» все было лучше, логичнее, приличнее и здоровее.&lt;/p&gt;
        &lt;span&gt;Анджей Сапковский - Последнее Желание&lt;/span&gt;'</span><span class="p">;</span>

        <span class="nb">srand</span> <span class="p">((</span><span class="nx">double</span><span class="p">)</span> <span class="nb">microtime</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">);</span>
        <span class="nv">$random_number</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">count</span><span class="p">(</span><span class="nv">$quotes</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">echo</span> <span class="p">(</span><span class="nv">$quotes</span><span class="p">[</span><span class="nv">$random_number</span><span class="p">]);</span>
    <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Теперь достаточно открыть <code class="highlighter-rouge">layout.tmpl.php</code> и где-нибудь перед footer’ом добавить вывод шаблона <code class="highlighter-rouge">quote.tmpl.php</code> средством специального макроса.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_T</span> <span class="p">(</span><span class="s1">'quote'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Чтобы блок с случайными цитатами отображался только на главной странице оберните его соответствующим параметром:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$content</span><span class="p">[</span><span class="s1">'class'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'frontpage'</span><span class="p">)</span> <span class="p">{</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="nx">_T</span> <span class="p">(</span><span class="s1">'quote'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="p">}</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Таким несложным способом вы можете добавлять новые блоки на страницы своего блога. По такому же принципу строятся все остальные страницы шаблона. Например если мы посмотрим стандартный <code class="highlighter-rouge">layout.tmpl.php</code> с 47 по 59 строку, то увидим как подхватываются почти все основные шаблоны сайта.</p>

<h2 id="подключение-собственных-js-и-css">Подключение собственных <span class="caps">JS</span> и <span class="caps">CSS</span>
</h2>

<p>Для подключения <span class="caps">JS</span> и <span class="caps">CSS</span> в Эгее также существуют специальные макросы. Для наглядности откройте стандартный <code class="highlighter-rouge">main.tmpl.php</code> и посмотрите в конец файла, после закрывающегося тега <code class="highlighter-rouge">body</code>:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_CSS</span> <span class="p">(</span><span class="s1">'main'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="nx">_JS</span> <span class="p">(</span><span class="s1">'main'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Здесь подхватываются <code class="highlighter-rouge">../js/main.js</code> и <code class="highlighter-rouge">../styles/main.css</code> из папки вашего шаблона. Для примера, давайте добавим анимацию появления постов с помощью <a href="https://github.com/matthieua/WOW" rel="nofollow" target="_blank">wow.js</a>. Скачайте сам wow.js и положите в папку <code class="highlighter-rouge">js</code> вашего шаблона. Также скачайте <a href="https://github.com/daneden/animate.css" rel="nofollow" target="_blank">animate.css</a> и разместите в папке <code class="highlighter-rouge">styles</code>. Откройте <code class="highlighter-rouge">main.tmpl.php</code> и подключите их:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">_CSS</span> <span class="p">(</span><span class="s1">'animate'</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="nx">_JS</span> <span class="p">(</span><span class="s1">'wow'</span><span class="p">)</span> <span class="cp">?&gt;</span></code></pre></figure>

<p>Далее в файл <code class="highlighter-rouge">init-script.tmpl.php</code> понадобится добавить следующий код с настройками <code class="highlighter-rouge">wow.js</code>:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="kd">var</span> <span class="nx">wow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WOW</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="na">boxClass</span><span class="p">:</span> <span class="s1">'wow'</span><span class="p">,</span>
            <span class="na">animateClass</span><span class="p">:</span> <span class="s1">'animated'</span><span class="p">,</span>
            <span class="na">offset</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">mobile</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">live</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">callback</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">box</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">},</span>
            <span class="na">scrollContainer</span><span class="p">:</span> <span class="kc">null</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="nx">wow</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Теперь остается открыть шаблон <code class="highlighter-rouge">notes.tmpl.php</code> и к основному div’у поста (18 строка) добавить класс <code class="highlighter-rouge">wow fadeIn</code>, а в <code class="highlighter-rouge">main.css</code> добавить <code class="highlighter-rouge">.wow { visibility: hidden; }</code>. По аналогии с данным примером в ваш шаблон можно добавлять какие угодно скрипты и стили.</p>

<p class="subtext">Смотрите ещё: <a href="/blog/kat-v-egee">Кат в Эгее</a>, <a href="/blog/svoi-shrifty-v-egee/">Свои шрифты в Эгее</a> и <a href="/blog/snoski-na-poljah-v-egee/">Сноски на полях в Эгее</a>.</p>



	
</article>

<nav class="row row-between-sm row-middle-sm space-auto-h-xs space-in-v-kilo-xs linel pagination">
	<span class="col-xs-12 col-sm-4 space-in-v-nano-xs space-in-v-zero-sm space-in-h-zero-xs previous">
		
			<a class="link-subcontrol" href="/blog/wallpaper-engine/">&lsaquo; Wallpaper Engine</a><br>
		
	</span>

	<span class="col-xs-12 col-sm-4 space-in-v-nano-xs space-in-v-zero-sm space-in-h-zero-xs next">
		
			<a class="link-subcontrol" href="/blog/what-remains-of-edith-finch/">What Remains of Edith Finch &rsaquo;</a>
		
	</span>
</nav>
<footer>
	<div class="space-auto-h-xs space-in-bottom-base-xs linel copyright">
		<!--s_links--><!--check code--><!--/s_links-->
		<div class="row">
			<div class="col-xs">
			Александра Травкина &copy; <time>2015 - 2018</time>
			</div>
			<div class="col-xs-shrink toggle">
				<span class="toggle-menu menu-bottom">&middot;&middot;&middot;</span>
			</div>
		</div>
	</div>
	<section class="space-auto-h-xs linel navigation">
	<nav class=" space-in-v-base-xs space-in-h-micro-xs space-in-h-base-sm space-minus-h-micro-xs space-minus-h-base-sm space-minus-top-nano-xs menu" id="menu">
		<ol class="menu-content">
			
			
			
				<li class="space-in-right-micro-md space-in-top-nano-xs active"><a class="link-subcontrol" href="/">Главная</a></li>
			
			
			
				<li class="space-in-right-micro-md space-in-top-nano-xs active"><a class="link-subcontrol" href="/blog/">Блог</a></li>
			
			
			
				<li class="space-in-right-micro-md space-in-top-nano-xs"><a class="link-subcontrol" href="/blog/tags/">Теги</a></li>
			
			
			
				<li class="space-in-right-micro-md space-in-top-nano-xs"><a class="link-subcontrol" href="/donate/">Поддержать</a></li>
			
			
			
				<li class="space-in-right-micro-md space-in-top-nano-xs"><a class="link-subcontrol" href="/about/">Об авторе</a></li>
			
			<li class="space-in-top-micro-xs space-in-top-nano-md rss-link"><a target="_blank" href="/feed">RSS</a></li>
		</ol>
	</nav>
</section>
</footer>

		<!--[ JS ]-->
		<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript" src="/static/js/jekyll-search.js"></script>
<script type="text/javascript" src="/static/modules/fotorama/fotorama.js"></script>
<script type="text/javascript" src="/static/modules/lightbox/lightbox.js"></script>
<script type="text/javascript" src="/static/modules/tocbot/tocbot.js"></script>

<script type="text/javascript" src="/static/js/template.js"></script>

<!--[ Lightbox ]-->
	</body>
</html>