<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Установка flarum на centOS</title>

		<!--[ Meta ]-->
			<!--[ Meta Global ]-->
	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="robots" content="index, follow" />

	<meta name="author" content="Александра Травкина">
	<meta name="generator" content="Jekyll v3.8.5" />

	<!--[ Meta Twitter ]-->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="Fixel">
	<meta name="twitter:creator" content="@sasha_travkina">
	<meta name="twitter:title" content="Установка flarum на centOS &middot; Fixel">
	<meta name="twitter:description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS довольно перспективная, симпатичная и вообще быстро развивающаяся....">
	<meta name="twitter:image" content="">

	<!--[ Meta Og ]-->
	<meta property="og:title" content="Установка flarum на centOS &middot; Fixel" />
	<meta property="og:site_name" content="Fixel">	
	<meta property="og:url" content="https://fixel.ru/blog/ustanovka-flarum-na-centos-7/">
	<meta property="og:description" content="Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS довольно перспективная, симпатичная и вообще быстро развивающаяся...."/>
	<meta property="og:image" content="" />
	<meta property="og:image:height" content="360">
	<meta property="og:image:width" content="640">
	<meta property="og:type" content="article">
	<meta property="og:locale" content="ru">

	<!--[ Favicons ]-->
	<link rel="icon" type="image/png" sizes="32x32" href="https://fixel.ru/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://fixel.ru/favicon-16x16.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://fixel.ru/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://fixel.ru/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://fixel.ru/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://fixel.ru/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://fixel.ru/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://fixel.ru/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://fixel.ru/apple-touch-icon-180x180.png">
	<link rel="manifest" href="https://fixel.ru/manifest.json">
	<link rel="mask-icon" href="https://fixel.ru/favicon.svg">

	<!--[ Control ]-->
	<meta name="yandex-verification" content="f96ef0e811161c03" />
	<meta name="google-site-verification" content="Jsg0E4pNBManXIvFa392tyJVX2TK-cLaDt2zBf4xvm0" />

	<!--[ Feed ]-->
	<link rel="canonical" href="https://fixel.ru/blog/ustanovka-flarum-na-centos-7/">
	<link rel="alternate" type="application/rss+xml" title="Fixel" href="https://fixel.ru/feed.xml" />
		
		<!--[ CSS ]-->
		<link rel="stylesheet" type="text/css" href="/assets/style.css" />
		<link rel="stylesheet" type="text/css" href="/assets/css/zoom.css" />
		<link rel="stylesheet" type="text/css" href="/assets/css/fotorama.css" />
		<link rel="stylesheet" type="text/css" href="/assets/css/settings.css" />
		<link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">

		<!--[ JS ]-->
		<script type="text/javascript" src="/assets/js/jquery.js"></script>
        <script type="text/javascript">base_url = "https://fixel.ru";</script>

        <!--[ Schema ]-->
		<script type="application/ld+json">

	
	
	{  
		"@context":"http://schema.org",
		"@type":"BlogPosting",
		"headline":"Установка flarum на centOS",
		"genre":"",
		"keywords":"Веб, Гайды",
		"wordCount":"541",
		"url":"https://fixel.ru/blog/ustanovka-flarum-na-centos-7/",
		"datePublished":"2016-01-17",
		"dateModified":"2016-01-17",
		"author":{  
			"@type":"Person",
			"name":"Александра Травкина",
			"sameAs":[  
				"https://twitter.com/sasha_travkina",
				"https://github.com/sashatravkina",
				"https://t.me/sashatravkina"
			]
		},
		"publisher":{  
			"@type":"Person",
			"name":"Александра Травкина",
			"sameAs":[  
				"https://twitter.com/sasha_travkina",
				"https://github.com/sashatravkina",
				"https://t.me/sashatravkina"
			]
		},
		"image":{  
			"@type":"ImageObject",
			"contentUrl":"",
			"url":"https://fixel.ru/",
			"height":"360",
			"width":"640"
		},
		"mainEntityOfPage":{  
			"@type":"WebPage",
			"@id":"https://fixel.ru/"
		},
		"articleBody":"Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — flarum. Судя по тому, что уже есть, CMS довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии, захотелось поставить её на поддомен и посмотреть чуть более детально. Собственно говоря, в этой статье я описываю процесс установки flarum’a на centOS 7.Ставилась flarum на centOS 7 самого обычного VDS хостинга. Для установки требуется Apache (с mod_rewrite), Nginx и Lighttpd. PHP версии 5.5 и выше, MySQL 5.5 и конечно же SSH консоль, так как ставится flarum через Сomposer.Обновляем PHPТак как на сервере стоял PHP версии 5.4 нам придется его обновить. Открываем консоль и добавляем репозиторий:rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-7.rpmПосле добавления репозитория на сервере появится папка /etc/yum.repos.d, переходим в папку и редактируем файл remi.repo. Ищем секцию:[remi-php56]name=Les RPM de remi de PHP 5.6 pour Enterprise Linux 6 - $basearch&amp;amp;nbsp#baseurl=http://rpms.famillecollet.com/enterprise/6/php56/$basearch/mirrorlist=http://rpms.famillecollet.com/enterprise/6/php56/mirror#WARNING: If you enable this repository, you must also enable &quot;remi&quot; enabled=0 gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remiИ меняем параметр enabled=0 на enabled=1. Аналогично можно обновится с PHP версии 5.4 до 5.5 в соответствующей секции remi-php55.Далее редактируем /etc/httpd/conf.d/phpmyadmin.conf. Находим строку с параметром php_admin_value open_basedir и добавляем :/usr/share/doc/. Должно получится следующее:php_admin_value open_basedir &quot;/usr/share/phpMyAdmin/:/etc/phpMyAdmin/:/var/lib/phpMyAdmin/:/tmp/:/usr/share/php/:/var/lib/php/session/:/usr/share/doc/&quot;Делается это для того, что бы не возникло проблем при обновлении phpmyadmin.Теперь в консоль можно ввести следующее:yum install php -yИ PHP обновится до 5.6 версии, соответственно. Проверяем:php -vОбновляем остальные пакетыуum updateУстанавливаем LighttpdСтавим wget:sudo yum install wgetОбновляем репозитории:sudo rpm --import https://fedoraproject.org/static/0608B895.txtsudo wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpmsudo rpm -ivh epel-release-6-8.noarch.rpmУстанавливаем lighttpd:sudo yum install lighttpdПрописываем автостарт:sudo chkconfig --levels 235 lighttpd onЗапускаем и проверяем:sudo service lighttpd startsudo service lighttpd statusУстанавливаем ComposerУстановка composer предельно проста:curl -sS https://getcomposer.org/installer | phpmv composer.phar /usr/local/bin/composerПроверяем:composer -vУстанавливаем FlarumЕсли все сделано правильно, то вы смело можете приступать к установке flarum. Переходим в папку с сайтом:cd /var/www/имя/data/www/доменПапка домена должна быть пуста. Вводим:composer create-project flarum/flarum . --stability=betaНачнется установка flarum. После завершения установки откройте сайт в браузере и завершите установку flarum.Возникающие ошибкиQ: Нет доступа к сайту, в логах ссылается на «Option Multiviews not allowed here».A: Править /etc/httpd/conf.d/z1_home.conf, изменить значение параметра AllowOverride на All.Q: При установке flarum composer выдает ошибку: PHP Fatal error: Uncaught exception ‘ErrorException’ with message ’proc_open(): fork failed — Cannot allocate memory’ in pharA: Смотрите заметку на getcomposer.org"
	}


</script>

		<link href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;subset=cyrillic" rel="stylesheet">
		
	</head>

	<body class="themplate-post space-out-h-zero-xs space-out-v-zero-xs space-in-h-mili-xs space-in-h-zero-lg m-scrollable-filter">
<header class="space-in-v-mili-xs header" role="banner">
    <div class="space-auto-h-xs logo">
        <a href="/blog/">
            <img srcset="/assets/images/avatar_96x96.png 2x, /assets/images/avatar_192x192.png 4x" src="/assets/images/avatar_64x64.png" width="64" height="64" alt="Блог Александры Травкиной">
        </a>
    </div>
</header>

<main class="main" role="main">
    <article class="article">
        <time>17 января 2016</time>
        <h1>Установка flarum на centOS</h1>
        <p>Все же если есть блог, стоит в него что нибудь написать. Так вот, не так давно на просторах сети повстречала относительно новый форумный движок — <a href="http://flarum.org/" rel="nofollow" target="_blank">flarum</a>. Судя по тому, что уже есть, <span class="caps">CMS</span> довольно перспективная, симпатичная и вообще быстро развивающаяся. Не смотря на то, что flarum все еще в бета-версии, захотелось поставить её на поддомен и посмотреть чуть более детально. Собственно говоря, в этой статье я описываю процесс установки flarum’a на cent<span class="caps">OS</span>&nbsp;7.</p>

<p>Ставилась flarum на cent<span class="caps">OS</span> 7 самого обычного <a href="https://www.ihor.ru/vds" rel="nofollow" target="_blank"><span class="caps">VDS</span> хостинга</a>. Для установки требуется Apache (с mod_rewrite), Nginx и Lighttpd. <span class="caps">PHP</span> версии <span class="caps">5.5</span> и выше, My<span class="caps">SQL</span> <span class="caps">5.5</span> и конечно же <span class="caps">SSH</span> консоль, так как ставится flarum через&nbsp;Сomposer.</p>

<h2 id="обновляем-php">Обновляем&nbsp;<span class="caps">PHP</span></h2>

<p>Так как на сервере стоял <span class="caps">PHP</span> версии <span class="caps">5.4</span> нам придется его обновить. Открываем консоль и добавляем&nbsp;репозиторий:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">rpm <span class="nt">-Uvh</span> http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</code></pre></figure>

<p>После добавления репозитория на сервере появится папка /etc/yum.repos.d, переходим в папку и редактируем файл remi.repo. Ищем&nbsp;секцию:</p>

<figure class="highlight"><pre><code class="language-conf" data-lang="conf">[<span class="n">remi</span>-<span class="n">php56</span>]
<span class="n">name</span>=<span class="n">Les</span> <span class="n">RPM</span> <span class="n">de</span> <span class="n">remi</span> <span class="n">de</span> <span class="n">PHP</span> <span class="m">5</span>.<span class="m">6</span> <span class="n">pour</span> <span class="n">Enterprise</span> <span class="n">Linux</span> <span class="m">6</span> - $<span class="n">basearch</span>&amp;<span class="n">nbsp</span>
<span class="c">#baseurl=http://rpms.famillecollet.com/enterprise/6/php56/$basearch/
</span><span class="n">mirrorlist</span>=<span class="n">http</span>://<span class="n">rpms</span>.<span class="n">famillecollet</span>.<span class="n">com</span>/<span class="n">enterprise</span>/<span class="m">6</span>/<span class="n">php56</span>/<span class="n">mirror</span>
<span class="c">#WARNING: If you enable this repository, you must also enable "remi" 
</span><span class="n">enabled</span>=<span class="m">0</span> 
<span class="n">gpgcheck</span>=<span class="m">1</span> 
<span class="n">gpgkey</span>=<span class="n">file</span>:///<span class="n">etc</span>/<span class="n">pki</span>/<span class="n">rpm</span>-<span class="n">gpg</span>/<span class="n">RPM</span>-<span class="n">GPG</span>-<span class="n">KEY</span>-<span class="n">remi</span></code></pre></figure>

<p>И меняем параметр enabled=0 на enabled=1. Аналогично можно обновится с <span class="caps">PHP</span> версии <span class="caps">5.4</span> до <span class="caps">5.5</span> в соответствующей секции&nbsp;remi-php55.</p>

<p>Далее редактируем /etc/httpd/conf.d/phpmyadmin.conf. Находим строку с параметром php_admin_value open_basedir и добавляем :/usr/share/doc/. Должно получится&nbsp;следующее:</p>

<figure class="highlight"><pre><code class="language-conf" data-lang="conf"><span class="n">php_admin_value</span> <span class="n">open_basedir</span> <span class="s2">"/usr/share/phpMyAdmin/:/etc/phpMyAdmin/:/var/lib/phpMyAdmin/:/tmp/:/usr/share/php/:/var/lib/php/session/:/usr/share/doc/"</span></code></pre></figure>

<p>Делается это для того, что бы не возникло проблем при обновлении&nbsp;phpmyadmin.</p>

<p>Теперь в консоль можно ввести&nbsp;следующее:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">yum <span class="nb">install </span>php <span class="nt">-y</span></code></pre></figure>

<p>И <span class="caps">PHP</span> обновится до <span class="caps">5.6</span> версии, соответственно.&nbsp;Проверяем:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">php <span class="nt">-v</span></code></pre></figure>

<h2 id="обновляем-остальные-пакеты">Обновляем остальные&nbsp;пакеты</h2>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">уum update</code></pre></figure>

<h2 id="устанавливаем-lighttpd">Устанавливаем&nbsp;Lighttpd</h2>

<p>Ставим&nbsp;wget:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>yum <span class="nb">install </span>wget</code></pre></figure>

<p>Обновляем&nbsp;репозитории:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>rpm <span class="nt">--import</span> https://fedoraproject.org/static/0608B895.txt
<span class="nb">sudo </span>wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
<span class="nb">sudo </span>rpm <span class="nt">-ivh</span> epel-release-6-8.noarch.rpm</code></pre></figure>

<p>Устанавливаем&nbsp;lighttpd:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>yum <span class="nb">install </span>lighttpd</code></pre></figure>

<p>Прописываем&nbsp;автостарт:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>chkconfig <span class="nt">--levels</span> 235 lighttpd on</code></pre></figure>

<p>Запускаем и&nbsp;проверяем:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">sudo </span>service lighttpd start
<span class="nb">sudo </span>service lighttpd status</code></pre></figure>

<h2 id="устанавливаем-composer">Устанавливаем&nbsp;Composer</h2>

<p>Установка composer предельно&nbsp;проста:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">curl <span class="nt">-sS</span> https://getcomposer.org/installer | php
<span class="nb">mv </span>composer.phar /usr/local/bin/composer</code></pre></figure>

<p>Проверяем:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">composer <span class="nt">-v</span></code></pre></figure>

<h2 id="устанавливаем-flarum">Устанавливаем&nbsp;Flarum</h2>

<p>Если все сделано правильно, то вы смело можете приступать к установке flarum. Переходим в папку с&nbsp;сайтом:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /var/www/имя/data/www/домен</code></pre></figure>

<p>Папка домена должна быть пуста.&nbsp;Вводим:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">composer create-project flarum/flarum <span class="nb">.</span> <span class="nt">--stability</span><span class="o">=</span>beta</code></pre></figure>

<p>Начнется установка flarum. После завершения установки откройте сайт в браузере и завершите установку&nbsp;flarum.</p>

<h2 id="возникающие-ошибки">Возникающие&nbsp;ошибки</h2>

<div block="">
<p><b>Q</b>: Нет доступа к сайту, в логах ссылается на «Option Multiviews not allowed&nbsp;here».</p>
<p><b>A</b>: Править /etc/httpd/conf.d/z1_home.conf, изменить значение параметра AllowOverride на&nbsp;All.</p>
<p><b>Q</b>: При установке flarum composer выдает ошибку: <span class="caps">PHP</span> Fatal error: Uncaught exception ‘ErrorException’ with message ’proc_open(): fork failed — Cannot allocate memory’ in&nbsp;phar</p>
<p><b>A</b>: Смотрите заметку на <a href="https://getcomposer.org/doc/articles/troubleshooting.md#proc-open-fork-failed-errors" rel="nofollow" target="_blank">getcomposer.org</a></p>
</div>


    </article>
    <nav class="row row-between-xs row-middle-xs space-in-v-kilo-xs wrapper bloglinks">
        <span class="col-xs-4 space-in-v-nano-xs space-in-v-zero-xs space-in-h-zero-xs previous">
            
                <a href="/blog/roskomnadzor-i-obhod-blokirovok/">&lsaquo; «Роскомнадзор» и обход блокировок</a><br>
            
        </span>
    
        <span class="col-xs-4 space-in-v-nano-xs space-in-v-zero-xs space-in-h-zero-xs next">
            
                <a href="/blog/firewatch/">Firewatch &rsaquo;</a>
            
        </span>
    </nav>
</main>

		<!-- JS -->
		<script src="/assets/js/jekyll-search.js"></script>
		<script src="/assets/js/zoom.js"></script>
		<script src="/assets/js/fotorama.js"></script>
		<script src="/assets/js/template.js"></script>

	</body>
</html>